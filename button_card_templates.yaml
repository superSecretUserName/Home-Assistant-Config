  test:
    aspect_ratio: 1/1
    tap_action:
      action: toggle
    style: |
      ha-card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 10px;
        }
    styles:
      name:
        - padding: 8px 1em
        - font-family: Roboto
        - font-size: 20px
      card:
        - border-radius: 30px
        - background: 'rgba(255,255,255,.1)'
    state:
      - value: 'on'
        styles:
          card:
            - background: 'rgba(255,255,255,.8)'
            - border: 1px solid white
            - box-shadow: '0 0 10px, inset 0 0 5px'
          name:
            - font-weight: bold
            - color: 'rgba(0,0,0,.6)'
          icon:
            - color: var(--button-card-light-color)
    hold_action:
      action: more-info

  base:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state:
      - value: 'on'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 0, 0, 0.6)']
    tap_action:
      ui_sound: |
        [[[ if (entity.state === 'off' && states['switch.galaxy_tab_a_screensaver'].state === 'off') {
        hass.callService('media_player', 'play_media', {entity_id: 'media_player.tablet', media_content_id: '/local/sound/on.m4a', media_content_type: 'music'}); }
        else if (entity.state === 'on' && states['switch.galaxy_tab_a_screensaver'].state === 'off') {
        hass.callService('media_player', 'play_media', {entity_id: 'media_player.tablet', media_content_id: '/local/sound/off.m4a', media_content_type: 'music'}); } ]]]
      action: toggle
      haptic: light
    styles:
      name:
        [top: 57.7%, left: 11%, line-height: 2vw, position: absolute]
      state:
        [top: 74%, left: 11%, line-height: 2vw, position: absolute]
      card:
        [font-family: Sf Display, letter-spacing: 0.05vw, font-weight: 400, color: 'rgba(255, 255, 255, 0.3)', font-size: 1.34vw, 
        background-color: 'rgba(115, 115, 115, 0.2)', border-radius: 0.8vw, box-shadow: none, transition: none]
      custom_fields:
        circle:
          [top: 8.5%, left: 56.2%, width: 3.5vw, position: absolute, letter-spacing: 0.03vw]

  light:
    template: ['base']
    custom_fields:
      circle: >
        [[[ if (entity.state === 'on' && entity.attributes.brightness) {
        const brightness = Math.round(entity.attributes.brightness / 2.54);
        const radius = 20.5; const circumference = radius * 2 * Math.PI; 
        return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="#b2b2b2" stroke-width="1.5" fill="none" style="
        transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - brightness / 100 * circumference};" />
        <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${brightness}<tspan font-size="10">%</tspan></text></svg>`; } ]]]
    hold_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        title: '[[[ return entity.attributes.friendly_name ]]]'
        card:
          type: entities
          entities:
            - type: custom:light-popup-card
              entity: '[[[ return entity.entity_id ]]]'
              icon: none
              fullscreen: false
              brightnessWidth: 130px
              brightnessHeight: 360px
              borderRadius: 1.7em
              sliderColor: '#c7c7c7'
              sliderTrackColor: rgba(25, 25, 25, 0.9)
            - type: custom:hui-element
              card_type: horizontal-stack
              style: '#root { justify-content: center; margin-top: 2em; }'
              cards:
              - type: custom:button-card
                styles:
                  card:
                    [background: '#d8d9e1']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    color_temp: 153
                template: color_action
              - type: custom:button-card
                styles:
                  card:
                    [background: '#d5b08d']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    color_temp: 326
                template: color_action
            - type: custom:hui-element
              card_type: horizontal-stack
              style: '#root { justify-content: center; margin-bottom: 1em; }'
              cards:
              - type: custom:button-card
                styles:
                  card: 
                    [background: '#ce944b']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    color_temp: 500
                template: color_action
              - type: custom:button-card
                styles:
                  card:
                    [background: 'radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 80%), 
                    conic-gradient(rgb(120, 39, 230), rgb(230, 34, 231), rgb(228, 5, 136), rgb(228, 25, 25), 
                    rgb(229, 105, 30), rgb(232, 226, 46), rgb(125, 230, 41), rgb(52, 232, 40), rgb(51, 231, 92), 
                    rgb(52, 232, 224), rgb(32, 125, 229), rgb(18, 39, 229), rgb(120, 39, 230))']
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: '[[[ return entity.attributes.friendly_name ]]]'
                    card:
                      type: custom:light-entity-card
                      entity: '[[[ return entity.entity_id ]]]'
                      brightness: false
                      color_temp: true
                      full_width_sliders: false
                      hide_header: true
                      show_slider_percent: true
                      smooth_color_wheel: true
                      consolidate_entities: true
                template: color_action

  color_action:
    styles:
      card:
        [border-radius: 50%, height: 4em, width: 4em, margin: 4px]
