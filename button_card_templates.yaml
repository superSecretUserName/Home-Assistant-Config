  test:
    aspect_ratio: 1/1
    tap_action:
      action: toggle
    style: |
      ha-card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 10px;
        }
    styles:
      name:
        - padding: 8px 1em
        - font-family: Roboto
        - font-size: 20px
      card:
        - border-radius: 30px
        - background: 'rgba(255,255,255,.1)'
    state:
      - value: 'on'
        styles:
          card:
            - background: 'rgba(255,255,255,.8)'
            - border: 1px solid white
            - box-shadow: '0 0 10px, inset 0 0 5px'
          name:
            - font-weight: bold
            - color: 'rgba(0,0,0,.6)'
          icon:
            - color: var(--button-card-light-color)
    hold_action:
      action: more-info

  base:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state:
      - value: 'on'
        styles:
          card: [background-color: 'rgba(255, 255, 255, 0.8)']
          name: [color: 'rgba(0, 0, 0, 0.6)']
          state: [color: 'rgba(0, 0, 0, 0.6)']
    tap_action:
      action: toggle
      haptic: light
    styles:
      name:
        [top: 57.7%, left: 11%, line-height: 28.8px, position: absolute]
      state:
        [top: 74%, left: 11%, line-height: 28.8px, position: absolute]
      card:
        [font-family: Sf Display, letter-spacing: 0.72px, font-weight: 400, color: 'rgba(255, 255, 255, 0.3)', font-size: 9.56px, 
        background-color: 'rgba(115, 115, 115, 0.2)', border-radius: 30px, box-shadow: none, transition: none]
      custom_fields:
        circle:
          [top: 8.5%, left: 56.2%, width: 24.99px, position: absolute, letter-spacing: 0.21px]

  light:
    template: ['base']
    custom_fields:
      circle: >
        [[[ if (entity.state === 'on' && entity.attributes.brightness) {
        const brightness = Math.round(entity.attributes.brightness / 2.54);
        const radius = 20.5; const circumference = radius * 2 * Math.PI; 
        return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="#b2b2b2" stroke-width="1.5" fill="none" style="
        transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - brightness / 100 * circumference};" />
        <text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">${brightness}<tspan font-size="10">%</tspan></text></svg>`; } ]]]
    hold_action:
      action: fire-dom-event
      browser_mod:
        command: popup
        title: '[[[ return entity.attributes.friendly_name ]]]'
        card:
          type: entities
          entities:
            - type: custom:light-popup-card
              entity: '[[[ return entity.entity_id ]]]'
              icon: none
              fullscreen: false
              brightnessWidth: 130px
              brightnessHeight: 360px
              borderRadius: 1.7em
              sliderColor: '#c7c7c7'
              sliderTrackColor: rgba(25, 25, 25, 0.9)
            - type: custom:hui-element
              card_type: horizontal-stack
              style: '#root { justify-content: center; margin-top: 2em; }'
              cards:
              - type: custom:button-card
                styles:
                  card:
                    [background: '#ffe7c0']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    color_temp: 370
                template: color_action
              - type: custom:button-card
                styles:
                  card:
                    [background: '#ffa200']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    color_temp: 500
                template: color_action
            - type: custom:hui-element
              card_type: horizontal-stack
              style: '#root { justify-content: center; margin-bottom: 1em; }'
              cards:
              - type: custom:button-card
                styles:
                  card: 
                    [background: '#f426ff']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    rgb_color:
                      - 244
                      - 38
                      - 255
                template: color_action
              - type: custom:button-card
                styles:
                  card: 
                    [background: '#46ffec']
                tap_action:
                  action: call-service
                  service: light.turn_on
                  service_data:
                    entity_id: '[[[ return entity.entity_id ]]]'
                    rgb_color:
                      - 70
                      - 255
                      - 236
                template: color_action

  color_action:
    styles:
      card:
        [border-radius: 50%, height: 4em, width: 4em, margin: 4px]

  icon_format:
    custom_fields:
      icon_animate: >
        [[[ const state = entity.state === 'on' ? 'animate' : null;
        return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
        <path fill="#9da0a2" d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z"/>
        <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5"/> </svg>`;]]]
    styles:
      custom_fields:
        icon_animate:
          [top: 11%, left: 4.6%, width: 21.77px, position: absolute]  
